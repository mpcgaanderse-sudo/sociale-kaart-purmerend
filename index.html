<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sociale Kaart Purmerend - Huisartsenpraktijk De Gors</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS voor de kaart -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Wachtwoordscherm -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                    <circle cx="24" cy="24" r="24" fill="#2563eb"/>
                    <path d="M24 12v24M12 24h24" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <h1>Sociale Kaart Purmerend</h1>
            <p>Huisartsenpraktijk De Gors</p>
            <form id="login-form">
                <input type="password" id="password-input" placeholder="Wachtwoord" autocomplete="current-password" required>
                <button type="submit">Inloggen</button>
                <p id="login-error" class="error hidden">Onjuist wachtwoord</p>
            </form>
        </div>
    </div>

    <!-- Hoofdapplicatie -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <svg width="32" height="32" viewBox="0 0 48 48" fill="none">
                    <circle cx="24" cy="24" r="24" fill="#2563eb"/>
                    <path d="M24 12v24M12 24h24" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <div>
                    <h1>Sociale Kaart Purmerend</h1>
                    <span class="subtitle">Huisartsenpraktijk De Gors</span>
                </div>
            </div>
            <div class="header-right">
                <button id="btn-add" class="btn btn-primary" title="Zorgverlener toevoegen">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 3v12M3 9h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    <span class="btn-label">Toevoegen</span>
                </button>
                <button id="btn-logout" class="btn btn-ghost" title="Uitloggen">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"/></svg>
                </button>
            </div>
        </header>

        <!-- Zoek- en filterbalk -->
        <div class="toolbar">
            <div class="search-box">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                <input type="text" id="search-input" placeholder="Zoek op naam, specialisatie, opmerking...">
                <button id="search-clear" class="search-clear hidden">&times;</button>
            </div>
            <div id="category-filters" class="category-filters">
                <!-- Categorie√´n worden dynamisch geladen -->
            </div>
        </div>

        <!-- Resultaten teller en weergave opties -->
        <div class="results-bar">
            <span id="results-count"></span>
            <div class="view-toggle">
                <button id="btn-view-cards" class="view-btn active" title="Kaartjes weergave">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                </button>
                <button id="btn-view-list" class="view-btn" title="Lijst weergave">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                </button>
                <button id="btn-view-map" class="view-btn" title="Kaart weergave">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>
                </button>
            </div>
        </div>

        <!-- Zorgverleners grid -->
        <main id="cards-container" class="cards-container">
            <!-- Kaartjes worden dynamisch geladen -->
        </main>

        <!-- Zorgverleners lijst -->
        <main id="list-container" class="list-container hidden">
            <!-- Lijstitems worden dynamisch geladen -->
        </main>

        <!-- Kaart container -->
        <div id="map-container" class="map-container hidden">
            <div id="map" class="map"></div>
        </div>

        <!-- Leeg state -->
        <div id="empty-state" class="empty-state hidden">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            <h3>Geen zorgverleners gevonden</h3>
            <p>Pas je zoekopdracht of filters aan, of voeg een nieuwe zorgverlener toe.</p>
        </div>
    </div>

    <!-- Modal: Zorgverlener toevoegen/bewerken -->
    <div id="modal-provider" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-provider-title">Zorgverlener toevoegen</h2>
                <button class="modal-close" data-close="modal-provider">&times;</button>
            </div>
            <form id="form-provider" class="modal-body">
                <input type="hidden" id="provider-id">

                <!-- Zoek een bestaande praktijk -->
                <div class="form-group search-place-group">
                    <label for="search-place">üîç Zoek praktijk (optioneel)</label>
                    <div class="search-place-wrapper">
                        <input type="text" id="search-place" placeholder="Typ naam + plaats, bijv. 'Fysiotherapie Purmerend'">
                        <button type="button" id="btn-search-place" class="btn btn-small btn-primary">Zoeken</button>
                    </div>
                    <div id="search-place-results" class="search-place-results hidden"></div>
                    <small>Zoek een praktijk om automatisch gegevens in te vullen</small>
                </div>

                <hr class="form-divider">

                <div class="form-group">
                    <label for="provider-naam">Naam *</label>
                    <input type="text" id="provider-naam" required placeholder="Bijv. Fysiotherapie Purmerend">
                </div>
                <div class="form-group">
                    <label for="provider-categorie">Categorie *</label>
                    <select id="provider-categorie" required>
                        <option value="">Kies een categorie...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="provider-adres">Adres</label>
                    <input type="text" id="provider-adres" placeholder="Straatnaam 1, Purmerend">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="provider-telefoon">Telefoon</label>
                        <input type="tel" id="provider-telefoon" placeholder="0299-123456">
                    </div>
                    <div class="form-group">
                        <label for="provider-email">E-mail</label>
                        <input type="email" id="provider-email" placeholder="info@voorbeeld.nl">
                    </div>
                </div>
                <div class="form-group">
                    <label for="provider-website">Website</label>
                    <input type="url" id="provider-website" placeholder="https://www.voorbeeld.nl">
                </div>
                <div class="form-group">
                    <label for="provider-labels">Labels / specialisaties</label>
                    <input type="text" id="provider-labels" placeholder="Typ een label en druk Enter">
                    <div id="provider-labels-list" class="labels-list"></div>
                    <small>Druk op Enter om een label toe te voegen</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" data-close="modal-provider">Annuleren</button>
                    <button type="submit" class="btn btn-primary">Opslaan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Zorgverlener detail -->
    <div id="modal-detail" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-detail-content">
            <div class="modal-header">
                <h2 id="detail-naam"></h2>
                <button class="modal-close" data-close="modal-detail">&times;</button>
            </div>
            <div class="modal-body">
                <div class="detail-info">
                    <span id="detail-categorie" class="detail-categorie"></span>
                    <div id="detail-contact" class="detail-contact"></div>
                    <div id="detail-labels" class="detail-labels"></div>
                </div>
                <div class="detail-actions">
                    <button id="btn-edit-provider" class="btn btn-small btn-ghost">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        Bewerken
                    </button>
                    <button id="btn-delete-provider" class="btn btn-small btn-danger">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
                        Verwijderen
                    </button>
                </div>
                <hr>
                <div class="comments-section">
                    <h3>Opmerkingen & tips <span id="comments-count" class="comments-badge">0</span></h3>
                    <div id="comments-list" class="comments-list">
                        <!-- Opmerkingen worden dynamisch geladen -->
                    </div>
                    <form id="form-comment" class="comment-form">
                        <textarea id="comment-text" placeholder="Schrijf een opmerking of tip..." rows="2" required></textarea>
                        <div class="comment-form-footer">
                            <input type="text" id="comment-author" placeholder="Je naam (optioneel)">
                            <button type="submit" class="btn btn-primary btn-small">Plaatsen</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bevestigingsdialoog -->
    <div id="modal-confirm" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-confirm-content">
            <div class="modal-header">
                <h2>Bevestiging</h2>
                <button class="modal-close" data-close="modal-confirm">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-message"></p>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" data-close="modal-confirm">Annuleren</button>
                    <button type="button" id="btn-confirm-ok" class="btn btn-danger">Verwijderen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK (compat versie voor eenvoud) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <!-- Leaflet JS voor de kaart -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>
